@model InvoiceManagementSystem.Models.AccountModel
@{ ViewBag.Title = "MyProfile";
    Layout = "~/Views/Shared/_Layout.cshtml"; }

<style>
    .tab-pane {
        display: none;
    }

        .tab-pane.active {
            display: block;
        }
</style>
<br />
<br />
<div class="main-content position-relative max-height-vh-100 h-100" style="margin-top:-220px">
    <div class="card shadow-lg mx-4 card-profile-bottom">
        <div class="card-body p-3">
            <div class="row gx-4">
                <div class="col-auto">
                    <div class="avatar avatar-xl position-relative">
                        <img src="/Data/Profile/@Model.LSTAccountList[0].ProfileImg" id="ProfileImg2" class="navbar-brand-img h-100" alt="main_logo" style="width: 77px; max-height: 58px;" />
                    </div>
                </div>
                <div class="col-auto my-auto">
                    <div class="h-100">

                        <h5 class="mb-1" style="color:black">
                            <span id="Username1">@Model.LSTAccountList[0].UserName</span> <span id="Surname1"> @Model.LSTAccountList[0].SurName</span>
                        </h5>
                        <p class="mb-0 font-weight-bold text-sm" style="color:black">
                            @Session["RoleName"]
                        </p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3">
                    <div class="tabs">
                        <div class="nav-wrapper position-relative end-0">
                            <ul class="nav nav-pills nav-fill p-1" role="tablist">
                                <li class="nav-item" data-tab-id="profile">
                                    <a class="nav-link mb-0 px-0 py-1 active d-flex align-items-center justify-content-center " data-bs-toggle="tab" href="javascript:;" role="tab" aria-selected="false">
                                        <i class="fa fa-user"></i>
                                        <span class="ms-2">Profile</span>
                                    </a>
                                </li>
                                <li class="nav-item" data-tab-id="setting">
                                    <a class="nav-link mb-0 px-0 py-1 d-flex align-items-center justify-content-center " data-bs-toggle="tab" href="javascript:;" role="tab" aria-selected="false">
                                        <i class="ni ni-settings-gear-65"></i>
                                        <span class="ms-2">Settings</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-content">
        <div id="profile" class="tab-pane">
            <div class="container-fluid py-4">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card card-profile">
                            <img src="~/Data//assets/img/bg-profile.jpg" alt="Image placeholder" class="card-img-top">
                            <div class="row justify-content-center">
                                <div class="col-4 col-lg-4 order-lg-2">
                                    <div class="mt-n4 mt-lg-n6 mb-4 mb-lg-0">
                                        <a href="javascript:;">
                                            <img src="/Data/Profile/@Model.LSTAccountList[0].ProfileImg" id="ProfileImg1" class="w-100 border-radius-lg shadow-sm rounded-circle img-fluid border border-2 border-white" style="height:85px">
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body pt-0">
                                <div class="text-center mt-4">
                                    <h5 style="font-size:15px;">
                                        <i class="fa fa-user"></i>
                                        @Model.LSTAccountList[0].UserName
                                    </h5>
                                    <div class="h6 font-weight-300" style="font-size:15px;">
                                        <span class="font-weight-light"><i class="fa fa-envelope"></i> @Model.LSTAccountList[0].Email</span>
                                    </div>
                                    <span class="font-weight-light" style="font-size:15px;"><i class="fa fa-phone"></i> @Model.LSTAccountList[0].Mobile</span>
                                    <div class="p mt-4" style="font-size:15px;">
                                        <i class="fa fa-address-book mr-2"></i> &nbsp; <b>@Model.LSTAccountList[0].Address</b>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header pb-0">
                                <div class="d-flex align-items-center">
                                    <h5 class="mb-0" style="color:black"><i class="fa fa-user" aria-hidden="true"></i>&nbsp; Edit Profile</h5>
                                    <button class="btn btn-primary btn-sm ms-auto" onclick="UpdateProfile(@Model.LSTAccountList[0].Id)"><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Update Profile</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <p class="text-uppercase text-sm">User Information</p>
                                <br />
                                <div class="row">
                                    <input type="hidden" id="hdnId" value="@Model.LSTAccountList[0].Id" />
                                    <input type="hidden" id="hdnTeacherId" value="@Model.LSTAccountList[0].TeacherId" />
                                    <input type="hidden" id="hdnStudentId" value="@Model.LSTAccountList[0].StudentId" />
                                    <div class="col-md-6">
                                        <div class="form-group">


                                            <div class="form-group" id="divUploadFile" style="display:block">

                                                <label for="example-text-input" class="form-control-label">
                                                    Profile
                                                </label>
                                                <span id="removeButton" onclick="removeImage()" style="color: #100f0f;margin-left: 110px;">x</span>
                                                <div>
                                                    <input type="hidden" id="HiddenfileForImage" value="@Model.LSTAccountList[0].ProfileImg" />
                                                    @Html.TextBoxFor(model => model.LSTAccountList[0].Profile, new { @id = "Profile", @class = "form-control form-control-alternative", @type = "file", style = "display: none;", onchange = "displaySelectedImage(this)" })
                                                    @if (!string.IsNullOrEmpty(Model.LSTAccountList[0].ProfileImg))
                                                    {
                                                        var item = Model.LSTAccountList[0];
                                        <img src="~/Data/Profile/@item.ProfileImg" alt="Profile Image" id="ProfileImg" onclick="openFileInput()" style="cursor: pointer;margin-left: -2px;height: 156px;width: 168px;margin-bottom: 8px;margin-top: -4px;" width="50" height="50" /> }
                                    else
                                    {
                        <img id="ProfileImg" class="gambar" @*src="~/Data/Profile/dummy.jpg"*@ alt="Profile Image" onclick="openFileInput()" style="cursor: pointer;margin-left: -2px;height: 156px;width: 168px;margin-bottom: 8px;margin-top: -4px;" width="50" height="50" />}
                                                </div>
                                            </div>
                                            <div class="form-group" id="divFile" style="display:none">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Username <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="UserName" type="text" value="@Model.LSTAccountList[0].UserName">
                                            <span id="errusername" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Father Name <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="FatherName" type="text" value="@Model.LSTAccountList[0].FatherName">
                                            <span id="errFatherName" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Surname <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="SurName" type="text" value="@Model.LSTAccountList[0].SurName">
                                            <span id="errSurName" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Email address <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="Email" type="text" value="@Model.LSTAccountList[0].Email" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Mobile <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="MobileNo" type="text" value="@Model.LSTAccountList[0].Mobile">
                                            <span id="errmobile" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Address <span style="color: red">*</span></label>
                                            <textarea class="form-control form-control" id="Address" value="@Model.LSTAccountList[0].Address"></textarea>
                                            <span id="erraddress" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="setting" class="tab-pane">
            <div class="container-fluid py-4">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card card-profile">
                            <img src="~/Data//assets/img/bg-profile.jpg" alt="Image placeholder" class="card-img-top">
                            <div class="row justify-content-center">
                                <div class="col-4 col-lg-4 order-lg-2">
                                    <div class="mt-n4 mt-lg-n6 mb-4 mb-lg-0">
                                        <a href="javascript:;">
                                            <img src="/Data/Profile/@Model.LSTAccountList[0].ProfileImg" class="w-100 border-radius-lg shadow-sm rounded-circle img-fluid border border-2 border-white" style="height:85px">
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body pt-0">

                                <div class="text-center mt-4">
                                    <h5 style="font-size:15px;">
                                        <i class="fa fa-user"></i>
                                        @Model.LSTAccountList[0].UserName
                                    </h5>
                                    <div class="h6 font-weight-300" style="font-size:15px;">
                                        <span class="font-weight-light"><i class="fa fa-envelope"></i> @Model.LSTAccountList[0].Email</span>
                                    </div>
                                    <span class="font-weight-light" style="font-size:15px;"><i class="fa fa-phone"></i> @Model.LSTAccountList[0].Mobile</span>
                                    <div class="p mt-4" style="font-size:15px;">
                                        <i class="fa fa-address-book mr-2"></i> &nbsp; <b>@Model.LSTAccountList[0].Address</b>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header pb-0">
                                <div class="d-flex align-items-center">
                                    <h5 class="mb-0" style="color:black"><i class="fa fa-key" aria-hidden="true"></i>&nbsp; Change Password</h5>
                                    <button class="btn btn-warning btn-sm ms-auto" onclick="ChangePassword()"><i class="fa fa-key" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Change Password</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <p class="text-uppercase text-sm">User Information</p>
                                <div class="row">
                                    <input type="hidden" id="hdnintId" value="@Session["Id"]" />
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Old Password <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="oldPassword" type="text" placeholder="Enter Old Password">
                                            <span id="errOldPass" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">Re-type Password <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="retypePassword" type="text" placeholder="Enter Re-type Password">
                                            <span id="errRetypePass" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-text-input" class="form-control-label">New Password <span style="color: red">*</span></label>
                                            <input class="form-control form-control" id="newPassword" type="text" placeholder="Enter New Password">
                                            <span id="errNewPass" class="text-xs font-weight-bold mb-0" style="color:red"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="~/Scripts/Login.js"></script>
<script>
    $(document).ready(function () {

        
        MyProfile();
        $('#profile').show();
        $('#setting').hide();
        // Event handler for profile tab
        $('li[data-tab-id="profile"]').on('click', function () {
            $('#profile').show();
            $('#setting').hide();
        });

        // Event handler for setting tab
        $('li[data-tab-id="setting"]').on('click', function () {
            $('#profile').hide();
            $('#setting').show();
        });
    });




    const tabs = document.querySelectorAll('.nav-item');
    const tabContent = document.querySelectorAll('.tab-pane');

    // Add event listeners to tabs
    tabs.forEach(function (tab) {
        tab.addEventListener('click', function () {
            // Get the tab ID from the data attribute
            const tabId = this.getAttribute('data-tab-id');

            // Remove 'active' class from all tabs and content panes
            tabs.forEach(function (tab) {
                tab.classList.remove('active');
            });
            tabContent.forEach(function (content) {
                content.classList.remove('active');
            });

            // Add 'active' class to the selected tab and content pane
            this.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });


    function Show() {
        $('#setting').show();
        $('#profile').hide();
    }

    function RemoveFile() {
        document.getElementById('Profile').style.display = "block";
        document.getElementById('divFile').style.display = "none";
        //document.getElementById('hdnstrFile').value = "";
        document.getElementById('remove').style.display = "none";
        bISFile = 0;
    }
</script>
